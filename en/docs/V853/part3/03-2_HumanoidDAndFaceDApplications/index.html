<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-V853/part3/03-2_HumanoidDAndFaceDApplications" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">人形检测与人脸检测应用 | 全志Vision</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://vision.100ask.net/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://vision.100ask.net/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://vision.100ask.net/en/docs/V853/part3/03-2_HumanoidDAndFaceDApplications"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="人形检测与人脸检测应用 | 全志Vision"><meta data-rh="true" name="description" content="1.前言"><meta data-rh="true" property="og:description" content="1.前言"><link data-rh="true" rel="icon" href="/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://vision.100ask.net/en/docs/V853/part3/03-2_HumanoidDAndFaceDApplications"><link data-rh="true" rel="alternate" href="https://vision.100ask.net/docs/V853/part3/03-2_HumanoidDAndFaceDApplications" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://vision.100ask.net/en/docs/V853/part3/03-2_HumanoidDAndFaceDApplications" hreflang="en"><link data-rh="true" rel="alternate" href="https://vision.100ask.net/docs/V853/part3/03-2_HumanoidDAndFaceDApplications" hreflang="x-default"><link rel="stylesheet" href="/en/assets/css/styles.e3ab61ce.css">
<script src="/en/assets/js/runtime~main.1a0c385c.js" defer="defer"></script>
<script src="/en/assets/js/main.15ee136a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.svg" alt="东山PI" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/en/img/logo.svg" alt="东山PI" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">全志Vision</b></a><a class="navbar__item navbar__link" href="/en/docs/EmbeddedAIBasics/BoardIntroduction">嵌入式AI基础</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/docs/V853/BoardIntroduction">V853-AICT</a><a class="navbar__item navbar__link" href="/en/docs/V851se-TinyVision/BoardIntroduction">V851se-TinyVision</a><a class="navbar__item navbar__link" href="/en/docs/V851S/Describe">V851s-Lizard</a><a class="navbar__item navbar__link" href="/en/docs/V821/BoardIntroduction">V821-AvaotaF1</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/V853/part3/03-2_HumanoidDAndFaceDApplications" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">简体中文</a></li><li><a href="/en/docs/V853/part3/03-2_HumanoidDAndFaceDApplications" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><a href="https://github.com/100askTeam/AllwinnerVisionIC-Docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/V853/BoardIntroduction">DshanPI-AICT套件简述</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/V853/SourceCodeToolDoc">源码工具文档手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/V853/ConfigHostEnv">安装并配置开发环境</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/en/docs/category/开发板基础使用">开发板基础使用</a><button aria-label="Collapse sidebar category &#x27;开发板基础使用&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part1/01-1_QuickStart">开发板快速启动</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part1/01-2_UpdateTheSystem">更新系统</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part1/01-3_DevelopmentBoardDistributionNetwork">开发板配网</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part1/01-4_ADB">使用ADB进行文件传输</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part1/01-5_DevBoardFuncVerification">开发板功能测试</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/en/docs/category/sdk基础使用">SDK基础使用</a><button aria-label="Collapse sidebar category &#x27;SDK基础使用&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part2/02-1_CompileAndBuildSystem">编译构建系统</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part2/02-2_MIPIDisplayAdaptationGuide">MIPI显  示屏适配指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part2/02-3_PulleySwitchAdaptationGuide">波轮开关适配指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part2/02-4_MIPICameraAdaptationGuide">MIPI摄像头适配指南</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/en/docs/category/ai应用开发">AI应用开发</a><button aria-label="Collapse sidebar category &#x27;AI应用开发&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part3/03-1_TinaNPUDevelopmentDeploymentInstructions">Tina_NPU开发部署说明</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/V853/part3/03-2_HumanoidDAndFaceDApplications">人形检测与人脸检测应用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part3/03-3_E907SmallCoreDevelopment">E907小核开发</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part3/03-4_ModelConversionToolInstallationGuide">模型转换工具安装</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part3/03-5_ObjectDetectionModelYolov3DGuide">目标检测模型yolov3部署</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part3/03-6_OpenCVAndFFmpegAdaptationGuide">opencv和ffmpeg适配</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/en/docs/category/ai开发软件安装指南">AI开发软件安装指南</a><button aria-label="Collapse sidebar category &#x27;AI开发软件安装指南&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part4/04-1_AnaCondaInstallationGuide">AnaConda安装指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part4/04-2_PytorchFrameworkConstruction">Pytorch框架搭建</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/en/docs/category/算法环境搭建">算法环境搭建</a><button aria-label="Collapse sidebar category &#x27;算法环境搭建&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part5/05-1_BuildYOLOV5-V6.0Environment">搭建YOLOV5-V6.0环境</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/en/docs/category/模型部署开发">模型部署开发</a><button aria-label="Collapse sidebar category &#x27;模型部署开发&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part6/06-1_Yolov5ModelDeployment">yolov5模型部署指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part6/06-2_DeployYOLOV5CustomModel">部署YOLOV5自定义模型</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/en/docs/category/常见问题">常见问题</a><button aria-label="Collapse sidebar category &#x27;常见问题&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part7/07-1_Question1">问题1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/V853/part7/07-2_Question2">问题2</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/V853/allwinnner">全志社区V853案例分享</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/V853/student">学员优秀案例分享</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/docs/category/ai应用开发"><span itemprop="name">AI应用开发</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">人形检测与人脸检测应用</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>人形检测与人脸检测应用</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1前言">1.前言<a href="#1前言" class="hash-link" aria-label="Direct link to 1.前言" title="Direct link to 1.前言">​</a></h2>
<p>​	V853 芯片内置一颗 NPU核，其处理性能为最大 1 TOPS 并有 128KB 内部高速缓存用于高速数据交换，支持 OpenCL、OpenVX、android NN 与 ONNX 的 API 调用，同时也支持导入大量常用的深度学习模型。本章提供一个例程，展示如何使用V853芯片中的NPU部分进行人形检测和人脸识别。</p>
<p>资源包（含有应用程序和yuvplayer软件包）：<a href="https://forums.100ask.net/uploads/short-url/QhzAWsxvyGjhQx0SLSOnRpoLl2.zip" target="_blank" rel="noopener noreferrer">source.zip</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2示例程序目录">2.示例程序目录<a href="#2示例程序目录" class="hash-link" aria-label="Direct link to 2.示例程序目录" title="Direct link to 2.示例程序目录">​</a></h2>
<p>将上述资源包下载完成解压后，把示例程序<code>100ASK_viplite-driver</code>放在Ubuntu中的任意目录中。假设我放在/home/book/workspaces目录下，下面为人形识别和人脸识别应用程序的目录结构。</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">book@100ask:~/workspaces/100ASK_viplite-driver$ tree</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── 100ASK_Algo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── det_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── 100ASK_det_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── aw_errors.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── aw_errors.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    │   ├── body_384x216.yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── body_640x360.yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── demo.cc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── face_480x270.nv12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── list.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── list.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── Makefile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── Readme.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── testcase.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── fdet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── 100ASK_Facedet_480_288_nv12.nb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── awnn_det.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── awnn.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── awnn_info.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── awnn_lib.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── cross_utils.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── libawnn.a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── libawnn.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── pdet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── 100ASK_humandet_384_224_V0.nb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── 100ASK_humandet_384_224_V1.nb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── 100ASK_humandet_640_384_V0.nb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── 100ASK_humandet_640_384_V1.nb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── Readme.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── sdk_release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── libVIPlite.a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── libVIPlite.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── libVIPuser.a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── libVIPuser.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── sdk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── vip_lite_common.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        └── vip_lite.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7 directories, 31 files</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其中100ASK_Algo文件包含了：</p>
<p>​	1.det_demo目录包含应用程序和测试图片</p>
<p>​	2.fdet目录包含人脸模型</p>
<p>​	3.include目录包含应用程序头文件和</p>
<p>​	4.pdet目录包含人形模型</p>
<p>sdk_release中包含了NPU相关的模型处理文件</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3主函数democc">3.主函数demo.cc<a href="#3主函数democc" class="hash-link" aria-label="Direct link to 3.主函数demo.cc" title="Direct link to 3.主函数demo.cc">​</a></h2>
<p>下面仅对应用程序中的demo.cc程序中的main.cc进行讲解，对于其他代码，您可以直接查看应用程序压缩包的其他文件。</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">int main(int argc, char* argv[]) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (argc != 2) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        printf(&quot;%s testcase.txt\n&quot;, argv[0]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int count = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /*创建一个结构体获取参数1的中的数据，该结构体是输入nbg路径，返回awnn_info_t结构体。包含库名称，网络输入图像宽高，内存占用大小，阈值信息等，其中count为处理的图像和网络模型个数*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    network_info_t **infos = create_infos_from_testcase(argv[1], count);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    printf(&quot;count=%d\n&quot;, count);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (count &amp;&amp; infos) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        awnn_info_t * nbinfo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        unsigned int mem_size = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pthread_t thread[count] = {0};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//获取参数1获取对应模型个数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; count; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            nbinfo = awnn_get_info(infos[i]-&gt;nbg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            printf(&quot;info %s %s %u %u %u %f\n&quot;, nbinfo-&gt;name, nbinfo-&gt;md5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    nbinfo-&gt;width, nbinfo-&gt;height, nbinfo-&gt;mem_size, nbinfo-&gt;thresh);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            infos[i]-&gt;nbinfo = nbinfo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mem_size += nbinfo-&gt;mem_size;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//根据内存初始化申请NPU模型所需的内存大小</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        printf(&quot;mem_size: %u\n&quot;, mem_size);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        awnn_init(mem_size);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		//创建线程处理模型和图片</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; count; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pthread_create(&amp;thread[i], NULL, detect_thread, infos[i]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; count; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (thread[i] != 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                pthread_join(thread[i], NULL);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        awnn_uninit();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	//销毁结构体内存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    destroy_infos(infos, count);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到上述过程并没有涉及到模型的处理过程，可以查看100ASK_viplite-driver/100ASK_Algo/include/目录中对应函数的函数说明。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4编译应用程序">4.编译应用程序<a href="#4编译应用程序" class="hash-link" aria-label="Direct link to 4.编译应用程序" title="Direct link to 4.编译应用程序">​</a></h2>
<p>假设我将应用程序文件夹100ASK_viplite-driver放在~/workspaces/100ASK_viplite-driver，进入应用程序目录下</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">book@100ask:~$ cd ~/workspaces/100ASK_viplite-driver/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">book@100ask:~/workspaces/100ASK_viplite-driver$ cd 100ASK_Algo/det_demo/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>假设我的Tina SDK放在<code>/home/book/workspaces/tina-v853-open</code>，为应用程序增加环境变量。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">book@100ask:~/workspaces/100ASK_viplite-driver/100ASK_Algo/det_demo$ export TINA_TOP=/home/book/workspaces/tina-v853-open</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">book@100ask:~/workspaces/100ASK_viplite-driver/100ASK_Algo/det_demo$ export STAGING_DIR=~/workspaces/tina-v853-open/openwrt/openwrt/staging_dir/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>添加完成后即可编译应用程序</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">book@100ask:~/workspaces/100ASK_viplite-driver/100ASK_Algo/det_demo$ make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/home/book/workspaces/tina-v853-open/prebuilt/rootfsbuilt/arm/toolchain-sunxi-musl-gcc-830/toolchain/bin/arm-openwrt-linux-muslgnueabi-g++ demo.cc list.c aw_errors.c -I./ -I./../../100ASK_Algo/include -L./../../100ASK_Algo -L./../../sdk_release -l:libawnn.a -l:libVIPlite.a -l:libVIPuser.a -o 100ASK_det_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">book@100ask:~/workspaces/100ASK_viplite-driver/100ASK_Algo/det_demo$ ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100ASK_det_demo  aw_errors.h       body_640x360.yuv  face_480x270.nv12  list.h    Readme.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aw_errors.c      body_384x216.yuv  demo.cc           list.c             Makefile  testcase.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>编译完成后，可以在当前目录下生成一个名为100ASK_det_demo的应用程序。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5修改testcasetxt">5.修改testcase.txt<a href="#5修改testcasetxt" class="hash-link" aria-label="Direct link to 5.修改testcase.txt" title="Direct link to 5.修改testcase.txt">​</a></h2>
<p>​	testcase.txt文件里面包含有模型路径、待检测的图像、图像尺寸。下面对该文件进行详细的解读，testcase.txt原文件为：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># example:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># [network]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># network type thresh loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># input1 width height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># input2 width height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># input3 width height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># network: nbg path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># type: 1(humanoidv1.0),3(humanoidv3.0),4(face)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># thresh: postprocess thresh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># loop: loop count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># input: multi test case each in oneline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[network]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">models/100ASK_humandet_640_384_V1.nb 1 0.25 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">body_640x360.yuv 640 360</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[network]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">models/100ASK_humandet_384_224_V1.nb 3 0.25 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">body_384x216.yuv 384 216</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[network]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">models/100ASK_Facedet_480_288_nv12.nb 4 0.6 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">face_480x270.nv12 480 270</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到文件已经对该文件如何使用和网络节点的各参数定义有了解释。testcase.txt文件中可以包含有多个处理的模型，每个需要处理的模型需要有特定的格式要求，假设我现在使用的是100ASK_humandet_640_384_V1.nb模型文件处理test1_640x360.yuv的图像文件，则可以修改testcase.txt文件为</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[network]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">models/100ASK_humandet_640_384_V1.nb 1 0.25 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test1_640x360.yuv 640 360</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>models/100ASK_humandet_640_384_V1.nb</code>为模型的存放路径；<code>1</code>为模型的类别；<code>0.25</code>为后处理阈值；<code>1</code>为循环次数；<code>test1_640x360.yuv</code>为测试图像的名称；<code>640 360</code>为测试图像的尺寸。</p>
<p>**注意：**100ASK_humandet_640_384_V1.nb为类别1，100ASK_humandet_384_224_V1.nb为类别3。</p>
<p>如果你还想使用同一个模型，增加一个<code>test2_640x360.yuv</code>测试图像，可以直接在该模型下增加</p>
<p><code>test2_640x360.yuv</code>测试图像和图像尺寸，例如：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[network]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">models/100ASK_humandet_640_384_V1.nb 1 0.25 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test1_640x360.yuv 640 360</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test2_640x360.yuv 640 360</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6运行测试程序">6.运行测试程序<a href="#6运行测试程序" class="hash-link" aria-label="Direct link to 6.运行测试程序" title="Direct link to 6.运行测试程序">​</a></h2>
<p>​	我们在示例程序中已经放入供您进行测试使用的图像，您也可以使用TF卡将虚拟机中的应用程序、模型和测试图像等文件拷贝到TF卡中 ，TF卡中的文件结构应如下所示</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">book@100ask:/media/book/B89C-7C55$ tree</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── 100ASK_det_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── body_384x216.yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── body_640x360.yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── face_480x270.nv12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── 100ASK_Facedet_480_288_nv12.nb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── 100ASK_humandet_384_224_V1.nb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── 100ASK_humandet_640_384_V1.nb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── testcase.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到应用程序、测试图片和testcase.txt文件放在TF卡根目录的文件夹下，单独创建一个models文件夹将模型文件放在该文件夹下。</p>
<p>​	将开发板板上电，插入12V电源线和2条Type-C数据线后，再将TF卡插入开发板中</p>
<p>​	启动完成开发板后，挂载TF卡到/mnt目录下，输入<code>mount /dev/mmcblk1p1 /mnt/</code></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@TinaLinux:/# [ 9866.263682] sunxi-mmc sdc0: sdc set ios:clk 0Hz bm PP pm UP vdd 22 width 1 timing LEGACY(SDR12) dt B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 9866.523742] sunxi-mmc sdc0: no vqmmc,Check if there is regulator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 9866.553676] sunxi-mmc sdc0: sdc set ios:clk 400000Hz bm PP pm ON vdd 22 width 1 timing LEGACY(SDR12) dt B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 9866.593686] sunxi-mmc sdc0: sdc set ios:clk 400000Hz bm PP pm ON vdd 22 width 1 timing LEGACY(SDR12) dt B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 9866.606971] sunxi-mmc sdc0: sdc set ios:clk 400000Hz bm PP pm ON vdd 22 width 1 timing LEGACY(SDR12) dt B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 9866.619855] sunxi-mmc sdc0: sdc set ios:clk 400000Hz bm PP pm ON vdd 22 width 1 timing LEGACY(SDR12) dt B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 9866.633161] sunxi-mmc sdc0: sdc set ios:clk 400000Hz bm PP pm ON vdd 22 width 1 timing LEGACY(SDR12) dt B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 9866.855649] sunxi-mmc sdc0: sdc set ios:clk 0Hz bm PP pm ON vdd 22 width 1 timing LEGACY(SDR12) dt B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 9866.866027] sunxi-mmc sdc0: no vqmmc,Check if there is regulator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 9866.893675] sunxi-mmc sdc0: sdc set ios:clk 400000Hz bm PP pm ON vdd 22 width 1 timing LEGACY(SDR12) dt B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 9866.914333] mmc1: host does not support reading read-only switch, assuming write-enable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 9866.924044] sunxi-mmc sdc0: sdc set ios:clk 400000Hz bm PP pm ON vdd 22 width 4 timing LEGACY(SDR12) dt B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 9866.938320] sunxi-mmc sdc0: sdc set ios:clk 400000Hz bm PP pm ON vdd 22 width 4 timing UHS-DDR50 dt B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 9866.948838] sunxi-mmc sdc0: sdc set ios:clk 50000000Hz bm PP pm ON vdd 22 width 4 timing UHS-DDR50 dt B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 9866.959640] mmc1: new ultra high speed DDR50 SDHC card at address aaaa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 9866.967694] mmcblk1: mmc1:aaaa SU08G 7.40 GiB </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 9866.990824]  mmcblk1: p1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@TinaLinux:/# mount /dev/mmcblk1p1 /mnt/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 3573.953864] FAT-fs (mmcblk1p1): Volume was not properly unmounted. Some data may be corrupt. Please run fsck.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>进入mnt目录下即可看到TF卡内的文件</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@TinaLinux:/# cd /mnt/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@TinaLinux:/mnt# ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100ASK_det_demo            face_480x270.nv12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">System Volume Information  models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">body_384x216.yuv          testcase.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">body_640x360.yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@TinaLinux:/mnt# ls models/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100ASK_Facedet_480_288_nv12.nb  100ASK_humandet_640_384_V1.nb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100ASK_humandet_384_224_V1.nb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>确保应用程序、模型文件夹中的模型文件、测试图片、testcase.txt都存在后，即可开始运行测试程序，输入</p>
<p><code>./100ASK_det_demo testcase.txt</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@TinaLinux:/mnt# ./100ASK_det_demo testcase.txt </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">count=3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">info  05dc32ee903c08a3abd53ddd829a8dd5 640 384 10061394 0.000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">info  827b3a725d0fd7173338a56fd06c8db0 384 224 2829624 0.000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">info  3d42fcd47490a62d52ea021760[ 7944.592701] npu[665][665] vipcore, device init..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 7944.600170] set_vip_power_clk ON</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mem_size: 16530637</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Version: AW[ 7944.608597] enter aw vip mem alloc size 16530637</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NN_LIB_1.0.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0xb6f8f560]vip_in[ 7944.615697] aw_vip_mem_alloc vir 0xe1328000, phy 0x48800000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">it[121], </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The version of Viplit[ 7944.623477] npu[665][665] gckvip_drv_init  kernel logical phy address=0x48800000  virtual =0xe1328000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e is: 1.8.0-0-AW-2023-02-24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VIPLite driver version=0x00010800...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">malloc 384x224 nv12 buffer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">malloc 480x288 nv12 buffer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">malloc 640x384 nv12 buffer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">save file: post_body_384x216.yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">save file: post_face_480x270.nv12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">save file: post_body_640x360.yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 7946.373546] npu[665][665] gckvip_drv_exit, aw_vip_mem_free</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 7946.379816] aw_vip_mem_free vir 0xe1328000, phy 0x48800000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 7946.386027] aw_vip_mem_free dma_unmap_sg_atrs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 7946.391003] aw_vip_mem_free ion_unmap_kernel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 7946.396101] aw_vip_mem_free ion_free</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 7946.400118] aw_vip_mem_free ion_client_destroy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 7946.410983] npu[665][665] vipcore, device un-init..</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>执行测试程序完成后可以查看当前目录下的文件，输入<code>ls</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@TinaLinux:/mnt# ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100ASK_det_demo                      post_body_640x360.yuv.input_0.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">System Volume Information            post_body_640x360.yuv.input_1.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">body_384x216.yuv                     post_body_640x360.yuv.output_0.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">body_640x360.yuv                     post_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">face_480x270.nv12                    post_face_480x270.nv12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">models                               post_face_480x270.nv12.input_0.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_body_384x216.yuv                post_face_480x270.nv12.input_1.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_body_384x216.yuv.input_0.txt    post_face_480x270.nv12.output_0.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_body_384x216.yuv.input_1.txt    post_face_480x270.nv12.output_1.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_body_384x216.yuv.output_0.txt   post_face_480x270.nv12.output_2.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_body_384x216.yuv.output_1.txt   testcase.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_body_640x360.yuv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>上述文件中，带有post前缀的文件为执行应用程序后生成的文件。其中post_data文件夹含有模型的执行结果和执行性能</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">post_data/result_TID.txt ：输出每个模型检测结果，其中 TID 为检测线程ID号。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_data/performance_TID.txt ：输出每个模型检测性能结果，其中 TID 为检测线程ID号；性能评测时建议运行单个模型且将 stdout 重定向为 /dev/null 。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_inputN ：每个输入的画框结果，其中 inputN 为输入图像路径，直接在路径前添加 post_前缀进行保存，因此输入图像路径请勿添加 ./ 或使用绝对路径。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>post_body_384x216.yuv </code>、<code>post_body_640x360.yuv</code>、<code>post_face_480x270.nv12</code>为输出画框结果的图像。</p>
<p>卸载TF卡所用的文件系统，输入</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@TinaLinux:/mnt# cd ../</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@TinaLinux:/# umount /mnt/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7使用yuvplayer软件查看图像">7.使用yuvplayer软件查看图像<a href="#7使用yuvplayer软件查看图像" class="hash-link" aria-label="Direct link to 7.使用yuvplayer软件查看图像" title="Direct link to 7.使用yuvplayer软件查看图像">​</a></h2>
<p>将TF卡放入读卡器后，插入电脑端，使用yuvplayer软件打开图像，该文件放在source目录下的yuvplayer-2.5.zip，解压后即可使用。设置图像尺寸和颜色空间即可查看图像。</p>
<p>在电脑端，打开U盘文件夹。注意：您之前没使用过yuvplayer.exe，可能不会出现我的.nv12文件一样的图标，但不影响后续的操作。</p>
<p><img loading="lazy" alt="image-20230423162148009" src="/en/assets/images/image-20230423162148009-c8e827417bb511f1cff4933aebab0143.png" width="939" height="577" class="img_ev3q"></p>
<p>选择我们需要查看的图像，例如我想查看<code>body_640x360.yuv</code>文件，单击<code>body_640x360.yuv</code>文件后，右键后选择<strong>打开方式</strong>。</p>
<p><img loading="lazy" alt="image-20230423164412092" src="/en/assets/images/image-20230423164412092-fe43fea59e8b745d335758e0c366683d.png" width="939" height="548" class="img_ev3q"></p>
<p>点击<strong>更多应用</strong></p>
<p><img loading="lazy" alt="image-20230423154820959" src="/en/assets/images/image-20230423154820959-2595039985d572be89604e3c91f62446.png" width="383" height="290" class="img_ev3q"></p>
<p>使用滚轮往下滑，点击<strong>在这台电脑上查找其他应用</strong></p>
<p><img loading="lazy" alt="image-20230423155000888" src="/en/assets/images/image-20230423155000888-01ac1984c3597f2eb21f7a9bc4e2eafc.png" width="377" height="317" class="img_ev3q"></p>
<p>找到yuvplayer-2.5.zip解压出来的yuvplayer-2.5文件夹中的yuvplayer.exe文件，选中该文件后点击打开</p>
<p><img loading="lazy" alt="image-20230423155313544" src="/en/assets/images/image-20230423155313544-6f0e44e7e9ebb9a4ec32950b3fa7d5d1.png" width="945" height="533" class="img_ev3q"></p>
<p>打开后，会出现如下画面，该画面是由于没有设置尺寸和颜色空间导致的</p>
<p><img loading="lazy" alt="image-20230423155500610" src="/en/assets/images/image-20230423155500610-295e3739d4324088d3821e308ba148d1.png" width="354" height="358" class="img_ev3q"></p>
<p>在选项栏中点击Size后，选择Custom。这样的选择意思是选择自定义尺寸</p>
<p><img loading="lazy" alt="image-20230423155545017" src="/en/assets/images/image-20230423155545017-89f305af1d68c01a30946230ad509888.png" width="354" height="358" class="img_ev3q"></p>
<p>在自定义尺寸界面输入图像尺寸，该图像尺寸宽为640，高为360，设置完成后点击确定</p>
<p><img loading="lazy" alt="image-20230423155745696" src="/en/assets/images/image-20230423155745696-11ce31a5dd163996e6b8a7d05bb1b47d.png" width="354" height="358" class="img_ev3q"></p>
<p>确定完成之后可以，看到大致的图像，但此时还需要修改显示的图像空间。</p>
<p><img loading="lazy" alt="image-20230423162514376" src="/en/assets/images/image-20230423162514376-e226cd39841d81ffbf68bf52ab554d71.png" width="642" height="430" class="img_ev3q"></p>
<p>在选项栏中点击选择Color后，点击选择NV12颜色空间</p>
<p><img loading="lazy" alt="image-20230423162608387" src="/en/assets/images/image-20230423162608387-973e5aa4feb596b85a1bfd58a555dde7.png" width="642" height="430" class="img_ev3q"></p>
<p>选择完成后，即可看到正常的图像</p>
<p><img loading="lazy" alt="image-20230423162724470" src="/en/assets/images/image-20230423162724470-a8c16843f243393b82cbb5de367263a2.png" width="646" height="430" class="img_ev3q"></p>
<p>其他图像的查看方式也同理，值得注意的是每张图像的尺寸可能不一样，需要根据源图像的尺寸设置。</p>
<p>使用yuvplayer查看<code>post_face_480x270.nv12</code>	图像文件为：</p>
<p><img loading="lazy" alt="image-20230423183022049" src="/en/assets/images/image-20230423183022049-1812bd66a7ec21c0160e126889fda3f6.png" width="482" height="340" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7使用自定义图片测试">7.使用自定义图片测试<a href="#7使用自定义图片测试" class="hash-link" aria-label="Direct link to 7.使用自定义图片测试" title="Direct link to 7.使用自定义图片测试">​</a></h2>
<p>​	由于我们平常使用的图片格式多为JPG或者PNG格式，其图像数据格式都为RGB等常见颜色空间，但在视频编解码和视频传输应用中通常使用NV12的视频存储格式，它将图片中 Y 轴色度信息和 UV 轴亚像素信息存储在同一个平面中。这就导致在 NV12 格式中，图像的每一行都存储一个 Y 值(代表色度信息)，然后每隔两行存储一个 U 和 V 值(代表亚像素信息)。所以NV12 格式中的图像数据通常会比其他格式(如 RGB)少一半。</p>
<p>​	如果您获取的应用的图像为NV12就不需要进行格式转换，如果您想测试的图像为并不是NV12格式，而是我们常见的RGB格式的JPG或PNG图像，则需要使用工具进行转换。</p>
<p>​	下面我们使用的工具是<code>ffmpeg</code>，下面演示如何使用<code>ffmpeg</code>进行图像存储格式的转换。</p>
<p>​	安装<code>ffmpeg</code>，在虚拟机终端界面输入<code>sudo apt-get install ffmpeg</code></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">book@100ask:~$ sudo apt-get install ffmpeg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[sudo] password for book: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reading package lists... Done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Building dependency tree       </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reading state information... Done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The following package was automatically installed and is no longer required:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libdumbnet1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Use &#x27;sudo apt autoremove&#x27; to remove it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The following additional packages will be installed:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  i965-va-driver libaacs0 libass9 libavcodec57 libavdevice57 libavfilter6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libavformat57 libavresample3 libavutil55 libbdplus0 libbluray2 libbs2b0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libchromaprint1 libcrystalhd3 libdc1394-22 libflite1 libgme0 libgsm1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libllvm10 libmysofa0 libnorm1 libopenal-data libopenal1 libopenjp2-7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libopenmpt0 libpgm-5.2-0 libpostproc54 librubberband2 libsdl2-2.0-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libshine3 libsnappy1v5 libsndio6.1 libsoxr0 libssh-gcrypt-4 libswresample2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libswscale4 libva-drm2 libva-x11-2 libva2 libvdpau1 libx264-152 libx265-146</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libxvidcore4 libzmq5 libzvbi-common libzvbi0 mesa-va-drivers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mesa-vdpau-drivers va-driver-all vdpau-driver-all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Suggested packages:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ffmpeg-doc i965-va-driver-shaders libbluray-bdj firmware-crystalhd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libportaudio2 sndiod libvdpau-va-gl1 nvidia-vdpau-driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nvidia-legacy-340xx-vdpau-driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The following NEW packages will be installed:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ffmpeg i965-va-driver libaacs0 libass9 libavcodec57 libavdevice57</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libavfilter6 libavformat57 libavresample3 libavutil55 libbdplus0 libbluray2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libbs2b0 libchromaprint1 libcrystalhd3 libdc1394-22 libflite1 libgme0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libgsm1 libllvm10 libmysofa0 libnorm1 libopenal-data libopenal1 libopenjp2-7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libopenmpt0 libpgm-5.2-0 libpostproc54 librubberband2 libsdl2-2.0-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libshine3 libsnappy1v5 libsndio6.1 libsoxr0 libssh-gcrypt-4 libswresample2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libswscale4 libva-drm2 libva-x11-2 libva2 libvdpau1 libx264-152 libx265-146</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libxvidcore4 libzmq5 libzvbi-common libzvbi0 mesa-va-drivers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mesa-vdpau-drivers va-driver-all vdpau-driver-all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 upgraded, 51 newly installed, 0 to remove and 242 not upgraded.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Need to get 32.5 MB/47.9 MB of archives.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">After this operation, 222 MB of additional disk space will be used.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Do you want to continue? [Y/n] y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>此时会提示您将有222M空间需要被使用，此时输入<code>y</code>，即可进行下载安装</p>
<p>等待安装完成后，输入<code>ffmpeg -h</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">book@100ask:~$ ffmpeg -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg version 3.4.11-0ubuntu0.1 Copyright (c) 2000-2022 the FFmpeg developers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  built with gcc 7 (Ubuntu 7.5.0-3ubuntu1~18.04)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到<code>ffmpeg</code>的版本号和适用的Ubuntu，后续的使用指南可自行观看，这里就不展示全部输出信息。</p>
<p>下面我们使用《RISC-V嵌入式开发线下交流会》中的照片，  尺寸为<code>480×270</code>,图像格式为JPG</p>
<p><img loading="lazy" alt="test-480_288" src="/en/assets/images/test-480_288-5b7cf8050499eeccf3679e4446a696f5.jpg" width="480" height="288" class="img_ev3q"></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">book@100ask:~/workspaces/testImg$ ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_480-270.jpg</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>使用<code>ffmpeg</code>进行格式转换，在终端输入<code>ffmpeg -i test_480-270.jpg -s 480x288 -pix_fmt nv12 100ask_face-480-270.yuv</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">book@100ask:~/workspaces/testImg$ ffmpeg -i test_480-270.jpg -s 480x270 -pix_fmt nv12 100ask_face-480-270.yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg version 3.4.11-0ubuntu0.1 Copyright (c) 2000-2022 the FFmpeg developers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  built with gcc 7 (Ubuntu 7.5.0-3ubuntu1~18.04)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  configuration: --prefix=/usr --extra-version=0ubuntu0.1 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-librsvg --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libdrm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libavutil      55. 78.100 / 55. 78.100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libavcodec     57.107.100 / 57.107.100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libavformat    57. 83.100 / 57. 83.100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libavdevice    57. 10.100 / 57. 10.100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libavfilter     6.107.100 /  6.107.100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libavresample   3.  7.  0 /  3.  7.  0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libswscale      4.  8.100 /  4.  8.100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libswresample   2.  9.100 /  2.  9.100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  libpostproc    54.  7.100 / 54.  7.100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Input #0, image2, from &#x27;test_480-270.jpg&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Duration: 00:00:00.04, start: 0.000000, bitrate: 5699 kb/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Stream #0:0: Video: mjpeg, yuvj420p(pc, bt470bg/unknown/unknown), 480x270 [SAR 96:96 DAR 16:9], 25 tbr, 25 tbn, 25 tbc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stream mapping:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Stream #0:0 -&gt; #0:0 (mjpeg (native) -&gt; rawvideo (native))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Press [q] to stop, [?] for help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[swscaler @ 0x55787ff64b20] deprecated pixel format used, make sure you did set range correctly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Output #0, rawvideo, to &#x27;100ask_face-480-270.yuv&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    encoder         : Lavf57.83.100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Stream #0:0: Video: rawvideo (NV12 / 0x3231564E), nv12, 480x270 [SAR 1:1 DAR 16:9], q=2-31, 38880 kb/s, 25 fps, 25 tbn, 25 tbc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      encoder         : Lavc57.107.100 rawvideo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frame=    1 fps=0.0 q=-0.0 Lsize=     190kB time=00:00:00.04 bitrate=38880.0kbits/s speed=0.664x    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">video:190kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>执行完成没有出现报错，并可以输入<code>ls</code>查看转换后的图像文件</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">book@100ask:~/workspaces/testImg$ ls </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_480-270.jpg	100ask_face-480-270.yuv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以发现生成了一个名为<code>100ask_face-480-270.yuv</code>文件，该文件的图像尺寸为<code>480×270</code>，图像存储格式为NV12。</p>
<p>将其拷贝到开发板上，与应用程序100ASK_det_demo放在同一目录中，例如：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@TinaLinux:/mnt# ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100ASK_det_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100ask_face-480-270.yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">System Volume Information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">body_384x216.yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">body_640x360.yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">face_480x270.nv12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_100ask_face-480_288.yuv.input_0.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_100ask_face-480_288.yuv.input_1.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_100ask_face-480_288.yuv.output_0.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_100ask_face-480_288.yuv.output_1.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_100ask_face-480_288.yuv.output_2.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_body_384x216.yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_body_384x216.yuv.input_0.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_body_384x216.yuv.input_1.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_body_384x216.yuv.output_0.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_body_384x216.yuv.output_1.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_body_640x360.yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_body_640x360.yuv.input_0.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_body_640x360.yuv.input_1.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_body_640x360.yuv.output_0.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_face_480x270.nv12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_face_480x270.nv12.input_0.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_face_480x270.nv12.input_1.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_face_480x270.nv12.output_0.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_face_480x270.nv12.output_1.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post_face_480x270.nv12.output_2.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">testcase.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>修改testcase.txt，增加人脸模型的输入图像，在串口 终端输入</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@TinaLinux:/mnt# vi testcase.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>修改文件内容为：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># example:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># [network]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># network type thresh loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># input1 width height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># input2 width height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># input3 width height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># network: nbg path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># type: 1(humanoidv1.0),3(humanoidv3.0),4(face)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># thresh: postprocess thresh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># loop: loop count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># input: multi test case each in oneline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[network]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">models/100ASK_humandet_640_384_V1.nb 1 0.25 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">body_640x360.yuv 640 360</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[network]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">models/100ASK_humandet_384_224_V1.nb 3 0.25 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">body_384x216.yuv 384 216</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[network]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">models/100ASK_Facedet_480_288_nv12.nb 4 0.6 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">face_480x270.nv12 480 270</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100ask_face-480-270.yuv 480 270</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>运行<code>100ASK_det_demo</code>应用程序</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@TinaLinux:/mnt# ./100ASK_det_demo testcase.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">count=3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">info  05dc32ee903c08a3abd53ddd829a8dd5 640 384 10061394 0.000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">info  827b3a725d0fd7173338a56fd06c8db0 384 224 2829624 0.000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">info  3d42fcd47490a62d52ea021760[  212.538113] npu[465][465] vipcore, device init..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  212.545449] set_vip_power_clk ON</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mem_size: 16530637</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Version: AW[  212.553935] enter aw vip mem alloc size 16530637</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NN_LIB_1.0.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0xb6fe0560]vip_init[121], </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The version of Viplite is: 1.8.0-0-AW-2023-02-24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  212.569158] aw_vip_mem_alloc vir 0xe1353000, phy 0x48800000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  212.575548] npu[465][465] gckvip_drv_init  kernel logical phy address=0x48800000  virtual =0xe1353000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VIPLite driver version=0x00010800...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">malloc 480x288 nv12 buffer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">malloc 384x224 nv12 buffer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">malloc 640x384 nv12 buffer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">save file: post_body_384x216.yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">save file: post_face_480x270.nv12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">save file: post_body_640x360.yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">save file: post_100ask_face-480-270.yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  215.019076] npu[465][465] gckvip_drv_exit, aw_vip_mem_free</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  215.025231] aw_vip_mem_free vir 0xe1353000, phy 0x48800000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  215.031525] aw_vip_mem_free dma_unmap_sg_atrs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  215.036451] aw_vip_mem_free ion_unmap_kernel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  215.041627] aw_vip_mem_free ion_free</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  215.045646] aw_vip_mem_free ion_client_destroy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  215.051785] npu[465][465] vipcore, device un-init..</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>使用yuvplayer软件查看图像，配置图像的尺寸：宽480、高270；配置图像颜色空间为NV12</p>
<p><img loading="lazy" alt="image-20230423175937654" src="/en/assets/images/image-20230423175937654-08929963ee9d4a0c4e53d5aa205075ed.png" width="482" height="340" class="img_ev3q"></p>
<p>可以看到该模型已经检测到大部分人脸模型，可能由于图像过于模糊导致有个别 未能识别到，但该模型的精度还是比较高的。这里仅演示人脸识别，对于人形识别大家也可以参考这个示例自行去修改增加。参考这个示例大家可以去自己尝试获取自定义的图像进行人脸识别或人形检测。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/100askTeam/AllwinnerVisionIC-Docs/tree/main/docs/V853/part3/03-2_HumanoidDAndFaceDApplications.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/V853/part3/03-1_TinaNPUDevelopmentDeploymentInstructions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Tina_NPU开发部署说明</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/V853/part3/03-3_E907SmallCoreDevelopment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">E907小核开发</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1前言" class="table-of-contents__link toc-highlight">1.前言</a></li><li><a href="#2示例程序目录" class="table-of-contents__link toc-highlight">2.示例程序目录</a></li><li><a href="#3主函数democc" class="table-of-contents__link toc-highlight">3.主函数demo.cc</a></li><li><a href="#4编译应用程序" class="table-of-contents__link toc-highlight">4.编译应用程序</a></li><li><a href="#5修改testcasetxt" class="table-of-contents__link toc-highlight">5.修改testcase.txt</a></li><li><a href="#6运行测试程序" class="table-of-contents__link toc-highlight">6.运行测试程序</a></li><li><a href="#7使用yuvplayer软件查看图像" class="table-of-contents__link toc-highlight">7.使用yuvplayer软件查看图像</a></li><li><a href="#7使用自定义图片测试" class="table-of-contents__link toc-highlight">7.使用自定义图片测试</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 100askTeam, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>